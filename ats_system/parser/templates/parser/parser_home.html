{% extends 'landing/base.html' %}

{% block title %}Resume Parser - Jumaiya ATS{% endblock %}

{% block content %}
<div id="wrapper">
    <button class="btn btn-primary" id="menu-open" style="display: none;">&rarr;</button>
    <div class="bg-dark border-right" id="sidebar-wrapper">
        <div class="sidebar-heading">
            <span>Parser Menu</span>
            <button class="btn btn-dark float-end" id="menu-close">&larr;</button>
        </div>
        <div class="list-group list-group-flush">
            <a href="#" class="list-group-item list-group-item-action bg-dark text-white" id="dashboard-link">Dashboard</a>
            <a href="#" class="list-group-item list-group-item-action bg-dark text-white" id="upload-resume-link">Upload Resume</a>
            <a href="#" class="list-group-item list-group-item-action bg-dark text-white" id="candidates-link">Candidates</a>
            <a href="#" class="list-group-item list-group-item-action bg-dark text-white">Settings</a>
        </div>
    </div>
    <div id="page-content-wrapper">
        <div id="dashboard-content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
                <h1 class="mt-4">Welcome to the Parser!</h1>
            </nav>
            <div class="container-fluid">
                <p>This is where the main content of your resume parser will go.</p>
            </div>
        </div>

        <div id="upload-resume-content" style="display: none;">
            <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
                <h1 class="mt-4">Upload Resumes</h1>
            </nav>
            <div class="container-fluid">
                <form action="/upload" method="post" enctype="multipart/form-data">
                    <div class="mb-3">
                        <label for="resume-upload" class="form-label">Select one or more files (PDF, JPEG, PNG, DOCX):</label>
                        <input class="form-control" type="file" id="resume-upload" name="resumes" multiple accept=".pdf,.jpeg,.jpg,.png,.docx">
                    </div>
                    <button type="submit" class="btn btn-primary">Upload</button>
                </form>
            </div>
        </div>

        <div id="candidates-content" style="display: none;">
            <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
                <h1 class="mt-4">Candidates</h1>
            </nav>
            <div class="container-fluid">
                <table class="table">
                    <thead>
                        <tr>
                            <th scope="col">c_id</th>
                            <th scope="col">First Name</th>
                            <th scope="col">Last Name</th>
                            <th scope="col">DOB</th>
                            <th scope="col">Resume File Name</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th scope="row">1</th>
                            <td>John</td>
                            <td>Doe</td>
                            <td>1990-01-15</td>
                            <td>john_doe_resume.pdf</td>
                        </tr>
                        <tr>
                            <th scope="row">2</th>
                            <td>Jane</td>
                            <td>Smith</td>
                            <td>1992-05-20</td>
                            <td>jane_smith_cv.docx</td>
                        </tr>
                        <tr>
                            <th scope="row">3</th>
                            <td>Peter</td>
                            <td>Jones</td>
                            <td>1988-11-30</td>
                            <td>peter_jones_cv.pdf</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<style>
    body {
        overflow-x: hidden;
    }

    #wrapper {
        display: flex;
        transition: all 0.3s ease;
    }

    #sidebar-wrapper {
        min-height: 100vh;
        width: 15rem;
        position: fixed;
        left: 0;
        z-index: 1030;
        transition: transform 0.3s ease;
        transform: translateX(0);
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    #wrapper.toggled #sidebar-wrapper {
        transform: translateX(-15rem);
    }

    #page-content-wrapper {
        width: 100%;
        padding-left: 15rem; /* Same as sidebar width */
        transition: padding-left 0.3s ease;
    }

    #wrapper.toggled #page-content-wrapper {
        padding-left: 0;
    }

    #sidebar-wrapper .sidebar-heading {
        padding: 0.875rem 1.25rem;
        font-size: 1.2rem;
        color: white;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    #menu-open {
        position: fixed;
        left: 10px;
        top: 50%;
        transform: translateY(-50%);
        z-index: 1031;
    }

    .list-group-item-action.bg-dark.text-white {
        transition: all 0.2s ease-in-out;
    }

    .list-group-item-action.bg-dark.text-white:hover {
        background-color: #343a40 !important;
        color: white !important;
        box-shadow: 0 0 10px #ffd700;
        transform: scale(1.02);
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const menuClose = document.getElementById('menu-close');
        const menuOpen = document.getElementById('menu-open');
        const wrapper = document.getElementById('wrapper');
        const isSidebarToggled = localStorage.getItem('isSidebarToggled') === 'true';

        const dashboardLink = document.getElementById('dashboard-link');
        const uploadResumeLink = document.getElementById('upload-resume-link');
        const candidatesLink = document.getElementById('candidates-link');

        const dashboardContent = document.getElementById('dashboard-content');
        const uploadResumeContent = document.getElementById('upload-resume-content');
        const candidatesContent = document.getElementById('candidates-content');

        if (isSidebarToggled) {
            wrapper.classList.add('toggled');
            menuOpen.style.display = 'block';
        }

        menuClose.addEventListener('click', (e) => {
            e.preventDefault();
            wrapper.classList.add('toggled');
            localStorage.setItem('isSidebarToggled', 'true');
            menuOpen.style.display = 'block';
        });

        menuOpen.addEventListener('click', (e) => {
            e.preventDefault();
            wrapper.classList.remove('toggled');
            localStorage.setItem('isSidebarToggled', 'false');
            menuOpen.style.display = 'none';
        });

        dashboardLink.addEventListener('click', (e) => {
            e.preventDefault();
            dashboardContent.style.display = 'block';
            uploadResumeContent.style.display = 'none';
            candidatesContent.style.display = 'none';
        });

        uploadResumeLink.addEventListener('click', (e) => {
            e.preventDefault();
            dashboardContent.style.display = 'none';
            uploadResumeContent.style.display = 'block';
            candidatesContent.style.display = 'none';
        });

        candidatesLink.addEventListener('click', (e) => {
            e.preventDefault();
            dashboardContent.style.display = 'none';
            uploadResumeContent.style.display = 'none';
            candidatesContent.style.display = 'block';
        });
    });
</script>
{% endblock %}